{"version":3,"sources":["index.js"],"names":["mainNode","document","querySelector","switchLanguageButton","loadNextPageButton","submitSearchButton","formNode","searchInput","searchResults","displayDataOnPage","newsStories","console","log","articlesArr","articles","articleKeys","Object","keys","forEach","article","createStory","displayErrorToUser","error","createTitle","title","url","createImg","image","createDescription","description","createTimeCountry","time","country","currentDateTime","Date","now","jsTime","articleTimestamp","getTime","timeDifference","toFixed","className","node","createElement","storyHTML","urlToImage","publishedAt","innerHTML","appendChild","language","searchTerm","pageSize","loadAPI","fetch","then","response","json","body","catch","addEventListener","event"],"mappings":"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","file":"responsive-news-reader.a140e609.map","sourceRoot":"..","sourcesContent":["// elements avilable on page\nconst mainNode = document.querySelector(\"main\");\nconst switchLanguageButton = document.querySelector(\"#switch-languages\");\nconst loadNextPageButton = document.querySelector(\"#load-next-page\");\nconst submitSearchButton = document.querySelector(\"#search-button\");\nconst formNode = document.querySelector(\"form\");\nconst searchInput = document.querySelector(\"#search-field\");\nconst searchResults = document.querySelector(\".search-results\");\n\n// Breaking out API object to display\nfunction displayDataOnPage(newsStories) {\n  console.log(newsStories);\n  const articlesArr = newsStories.articles;\n  const articleKeys = Object.keys(articlesArr[0]);\n  //console.log(articleKeys);\n  articlesArr.forEach(function(article) {\n    //  console.log(article.title);\n    //  trigger the creation of a story for each node\n    createStory(article);\n  });\n}\n// Show if error with API call\nfunction displayErrorToUser(error) {\n  createStory(error);\n}\n\n//Create story componenets\nconst createTitle = function(title, url) {\n  return `<a href=\"${url}\"><h2>${title}</h2></a>`;\n};\nconst createImg = function(image) {\n  return `<img src=\"${image}\">`;\n};\nconst createDescription = function(description) {\n  return `<p>${description}</p>`;\n};\nconst createTimeCountry = function(time, country) {\n  let currentDateTime = Date.now();\n  //console.log(time);\n  let jsTime = new Date(time);\n\n  let articleTimestamp = jsTime.getTime();\n  timeDifference = currentDateTime - articleTimestamp;\n  //console.log(timeDifference);\n  time = timeDifference / 1000 / 60 / 60 / 24;\n  //console.log(time);\n  return `<p>${time.toFixed(0)} days ago | ${country}</p>`;\n};\n//Assemble story componenets\nconst createStory = function(article, className = \"story\") {\n  const node = document.createElement(\"div\");\n  const storyHTML = `<div class=\"article-img\"><a href=\"${\n    article.url\n  }\">${createImg(\n    article.urlToImage\n  )}</a></div><div class=\"article-text\">${createTitle(\n    article.title,\n    article.url\n  )}\n  ${createDescription(article.description)}${createTimeCountry(\n    article.publishedAt,\n    article.country\n  )}</div>`;\n  node.className = className;\n  node.innerHTML = storyHTML;\n  mainNode.appendChild(node);\n  //console.log(storyHTML);\n};\n\n// Global variabel defaults to pass into API.\nlet language = \"en\";\nlet searchTerm = \"UK\";\nlet pageSize = 10;\n\n// fetch news api\nconst loadAPI = function(language, searchTerm, pageSize) {\n  mainNode.innerHTML = \"\";\n  console.log(language, searchTerm, pageSize);\n  fetch(\n    `https://newsapi.org/v2/everything?q=${searchTerm}&pageSize=${pageSize}&language=${language}&apiKey=ca8681b5ce9447468962c7f40280c85f`\n  )\n    .then(function(response) {\n      return response.json();\n    })\n    .then(function(body) {\n      displayDataOnPage(body);\n    })\n    .catch(function(error) {\n      displayErrorToUser(error);\n    });\n};\n\n//// Features that happen on event listen\n\n//Switch the language\nswitchLanguageButton.addEventListener(\"click\", function(event) {\n  console.log(event);\n  console.log(language);\n  console.log(typeof language);\n  if (language === \"en\") {\n    language = \"es\";\n  } else if (language === \"es\") {\n    language = \"en\";\n  }\n\n  console.log(language);\n  loadAPI(language, searchTerm, pageSize);\n});\n\n// load in 10 more results\nloadNextPageButton.addEventListener(\"click\", function(event) {\n  console.log(event);\n  console.log(pageSize);\n  pageSize = pageSize + 10;\n  loadAPI(language, searchTerm, pageSize);\n});\n\n// submit a search query to the API\nformNode.addEventListener(\"submit\", function(event) {\n  console.log(event);\n  console.log(event);\n  // const searchNode = document.createElement(\"p\");\n  // searchNode.className = \"search\";\n  // let searchResut = searchInput;\n  searchTerm = searchInput;\n  loadAPI(language, searchTerm, pageSize);\n});\n\nloadAPI(language, searchTerm, pageSize);\n"]}